function spawn_lwss(t,r){t=t%32<0?32+t%32:t%32,grid_raw[r=r%32<0?32+r%32:r%32][t]=1,grid_raw[r+1][t+1]=1,grid_raw[r+1][t+2]=1,grid_raw[r][t+2]=1,grid_raw[r-1][t+2]=1}function randomize(){for(let t=0;t<32;t++)for(let r=0;r<32;r++)grid_raw[t][r]=Math.random()<.5?0:1}function draw(){let t="\u2554",r=won?" Congratulations! ":" The Game of Life ",n=16-r.length/2;for(let r=0;r<n;r++)t+="\u2550";t+=r;for(let r=0;r<n;r++)t+="\u2550";t+="\u2557\n";for(let r=0;r<32;r+=2){t+="\u2551";for(let n=0;n<32;n++)t+=won?r/2%2==1&&r<30?"You win!  "[(n+run_time+10+r/2)%10]:" ":lookup[grid_raw[r][n]][grid_raw[r+1][n]];t+="\u2551\n"}let e=run?" Stop ":" Start ";n=16-e.length/2,n-=e.length%2,t+="\u255a";for(let r=0;r<n;r++)t+="\u2550";t+=e;for(let r=0;r<n+e.length%2;r++)t+="\u2550";t+="\u255d",gol_canvas.textContent=t}function tick(){let t=!1,r=grid_raw.map(t=>({...t})),n=0;for(let e=0;e<32;e++)for(let o=0;o<32;o++){let l=0,a=t=>t%32<0?32+t%32:t%32,i=t=>t%32<0?32+t%32:t%32;l+=grid_raw[a(e-1)][i(o-1)],l+=grid_raw[a(e-1)][i(o)],l+=grid_raw[a(e-1)][i(o+1)],l+=grid_raw[a(e)][i(o-1)],l+=grid_raw[a(e)][i(o)],l+=grid_raw[a(e)][i(o+1)],l+=grid_raw[a(e+1)][i(o-1)],l+=grid_raw[a(e+1)][i(o)],l+=grid_raw[a(e+1)][i(o+1)];let d=r[e][o];3==l?r[e][o]=1:4!=l&&(r[e][o]=0),n+=l,r[e][o]!=d&&(t=!0)}return 0==n?(t=!0,won=!0):won=!1,grid_raw=r,t}let gol_canvas=document.getElementById("vertex_gol"),run=!0,won=!1,run_time=0;gol_canvas.onclick=function(t){let r=t.target.getBoundingClientRect(),n=t.clientX-r.left,e=t.clientY-r.top;if(n=Math.floor(n/r.width*34)-1,e=Math.floor(e/r.height*34)-1,n<32&&e<32&&(grid_raw[e][n]=0==grid_raw[e][n]?1:0),32==e){let t=run?" Stop ":" Start ";padding=16-t.length/2,padding-=t.length%2;let r=1+padding;n>r&&n<r+t.length&&(run=!run)}draw()},gol_canvas.oncontextmenu=function(t){let r=t.target.getBoundingClientRect(),n=t.clientX-r.left,e=t.clientY-r.top;return n=Math.floor(n/r.width*34)-1,e=Math.floor(e/r.height*34)-1,n<32&&e<32&&spawn_lwss(n,e),draw(),!1};let grid_raw=[];for(let t=0;t<32;t++){let t=[];for(let r=0;r<32;r++)t.push(0);grid_raw.push(t)}let lookup=[[],[]];lookup[0][0]=".",lookup[1][0]="\u2580",lookup[0][1]="\u2584",lookup[1][1]="\u2588",draw(),window.addEventListener("load",()=>{randomize();window.setInterval(()=>{run&&(run=tick(),draw())},60)}),window.setInterval(()=>{run_time+=1},1e3);