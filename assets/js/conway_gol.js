function spawn_lwss(t,r){t=t%32<0?32+t%32:t%32,grid_raw[r=r%32<0?32+r%32:r%32][t]=1,grid_raw[r+1][t+1]=1,grid_raw[r+1][t+2]=1,grid_raw[r][t+2]=1,grid_raw[r-1][t+2]=1}function randomize(){for(let t=0;t<32;t++)for(let r=0;r<32;r++)grid_raw[t][r]=Math.random()<.5?0:1}function draw(){let t="\u2554",r=" The Game of Life ",e=16-r.length/2;for(let r=0;r<e;r++)t+="\u2550";t+=r;for(let r=0;r<e;r++)t+="\u2550";t+="\u2557\n";for(let r=0;r<32;r+=2){t+="\u2551";for(let e=0;e<32;e++)t+=lookup[grid_raw[r][e]][grid_raw[r+1][e]];t+="\u2551\n"}let n=run?" Stop ":" Start ";e=16-n.length/2,e-=n.length%2,t+="\u255a";for(let r=0;r<e;r++)t+="\u2550";t+=n;for(let r=0;r<e+n.length%2;r++)t+="\u2550";t+="\u255d",gol_canvas.textContent=t}function tick(){let t=!1,r=grid_raw.map(t=>({...t}));for(let e=0;e<32;e++)for(let n=0;n<32;n++){let l=0,o=t=>t%32<0?32+t%32:t%32,a=t=>t%32<0?32+t%32:t%32;l+=grid_raw[o(e-1)][a(n-1)],l+=grid_raw[o(e-1)][a(n)],l+=grid_raw[o(e-1)][a(n+1)],l+=grid_raw[o(e)][a(n-1)],l+=grid_raw[o(e)][a(n)],l+=grid_raw[o(e)][a(n+1)],l+=grid_raw[o(e+1)][a(n-1)],l+=grid_raw[o(e+1)][a(n)],l+=grid_raw[o(e+1)][a(n+1)];let i=r[e][n];3==l?r[e][n]=1:4!=l&&(r[e][n]=0),r[e][n]!=i&&(t=!0)}return grid_raw=r,t}let gol_canvas=document.getElementById("vertex_gol"),run=!0;gol_canvas.onclick=function(t){let r=t.target.getBoundingClientRect(),e=t.clientX-r.left,n=t.clientY-r.top;if(e=Math.floor(e/r.width*34)-1,n=Math.floor(n/r.height*34)-1,e<32&&n<32&&(grid_raw[n][e]=0==grid_raw[n][e]?1:0),32==n){let t=run?" Stop ":" Start ";padding=16-t.length/2,padding-=t.length%2;let r=1+padding;e>r&&e<r+t.length&&(run=!run)}draw()},gol_canvas.oncontextmenu=function(t){let r=t.target.getBoundingClientRect(),e=t.clientX-r.left,n=t.clientY-r.top;return e=Math.floor(e/r.width*34)-1,n=Math.floor(n/r.height*34)-1,e<32&&n<32&&spawn_lwss(e,n),draw(),!1};let grid_raw=[];for(let t=0;t<32;t++){let t=[];for(let r=0;r<32;r++)t.push(0);grid_raw.push(t)}let lookup=[[],[]];lookup[0][0]=".",lookup[1][0]="\u2580",lookup[0][1]="\u2584",lookup[1][1]="\u2588",draw(),window.addEventListener("load",()=>{randomize();window.setInterval(()=>{run&&(tick(),draw())},60)});